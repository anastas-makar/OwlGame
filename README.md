# Игровой модуль для приложения «Спаси сову».

## Функции с точки зрения пользователя

* В иговой модуль можно войти через виджет. Виджет — это или обычная картинка, или, если животное ищет дом, изображение этого животного.
* Если животного нет:
  * Вы нажимаете на виджет и попадаете на экран «Мои города». На этом экране отображаются карты, часть из которых занята: на них построены города. На этом экране можно перейти на карту города или основать город.
    * Если вы выбрали «основать город», вы выбираете карту и даёте название новому городу. Основать город стоит 1 000 бриллиантов.
    * Если вы кликнули по карте уже существующего города, вы переходите на увеличенную карту, на которой видно иконки домов и замков.
      * Если вы кликнули по иконке дома или замка, вы переходите на страницу, где можно рассмотреть здание и увидеть, кто в нём живёт. Если в здании никто не живёт, видно подпись: «Комната свободна».
      * Над картой есть кнопка «Добавить постройку». Если вы нажали на эту кнопку, вы:
        1. Выбираете место на карте (доступные места подсвечены)
        2. Выбираете дом или замок, который хотите построить
        * У каждой постройки есть цена в бриллиантах и, возможно, время строительства в днях. Пока здание будет строиться, в него нельзя будет заселять животных.
* Если животное ищет дом:      
  * Вы переходите на страницу, на которой видно животное и указано, есть ли у вас для него свободные комнаты
    * Если свободные комнаты есть, вы видите карты, на которых есть свободные домики/замки. Можно перейти на карту и выбрать для животного домик
    * Есть кнопка «Уходи». Если вы нажимаете на кнопку «уходи», животное уходит и не возвращается. Это действие необратимо.
    * Если домиков нет или для животного не выбрали никакой домик, оно уходит само
    * Если животное ищет дом, в основном приложении появляется нотификация. Также отправляется пуш-уведомление о том, что животное ищет дом.
    * Из пуш-уведомления вы переходите сразу на страницу животного
    
* В домах есть комнаты. В комнатах можно ставить мебель
* Перед домом можно выращивать растения
* Если в доме есть плита и холодильник, из растений можно делать зелья
* Карта может быть захвачена монстрами, тогда нужно посылать животных и снабжать их бомбочками, чтобы отвоевать карту у монстров
* Пока карта захвачена монстрами, основать город нельзя
* Цель игры -- основать государство. Для этого нужно иметь пять городов с замками
## С точки зрения основного модуля

* Есть три интерфейса: для контроля баланса бриллиантов, для получения данных пользователя (авторизован ли, какой у него id), и для нотификаций в приложении. Основной модуль передаёт в игровой модуль свои объекты, которые имплементируют эти интерфейсы.
* Есть виджет, через который пользователь переходит на страницы, за которые отвечает игровой модуль